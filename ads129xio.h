/*
 * ads129x series SPI ADC driver
 *
 * Copyright (C) 2014 Topic Embedded Products
 *
 * Licensed under the GPL-2.
 */

#include <linux/ioctl.h>

#define ADS1298_IOC_MAGIC  'm'

// ADS1298 commands
#define ADS1298_WAKEUP  0x02
#define ADS1298_STANDBY 0x04
#define ADS1298_RESET   0x06
#define ADS1298_START   0x08
#define ADS1298_STOP    0x0A
#define ADS1298_RDATAC  0x10
#define ADS1298_SDATAC  0x11
#define ADS1298_RDATA   0x12
// Lower 5 bits are the register index, second byte is byte count-1
#define ADS1298_RREG    0x20
#define ADS1298_WREG	0x40

#define ADS1298_CMD_MASK	0x1F

#define ADS1298_SINGLE_DEV_CTRL	0x80
#define ADS1298_SIZE_MASK	0x1F

#define ADS1298_SINGLE_DEV_CMD(rw, cmd, size, dev)	_IOC(rw, ADS1298_IOC_MAGIC, (cmd | ADS1298_SINGLE_DEV_CTRL), ((size & ADS1298_SIZE_MASK) | (dev << 5)))


#define ADS1298_IOCWAKEUP	_IO(ADS1298_IOC_MAGIC, ADS1298_WAKEUP)
#define ADS1298_IOCSTANDBY	_IO(ADS1298_IOC_MAGIC, ADS1298_STANDBY)
#define ADS1298_IOCRESET	_IO(ADS1298_IOC_MAGIC, ADS1298_RESET)
#define ADS1298_IOCSTART	_IO(ADS1298_IOC_MAGIC, ADS1298_START)
#define ADS1298_IOCSTOP 	_IO(ADS1298_IOC_MAGIC, ADS1298_STOP)
#define ADS1298_IOCRDATAC	_IO(ADS1298_IOC_MAGIC, ADS1298_RDATAC)
#define ADS1298_IOCSDATAC	_IO(ADS1298_IOC_MAGIC, ADS1298_SDATAC)
#define ADS1298_IOCRDATA	_IO(ADS1298_IOC_MAGIC, ADS1298_RDATA)

// Expects a 0x1A size buffer
#define ADS1298_IOCQALLREG	_IOC(_IOC_READ, ADS1298_IOC_MAGIC, ADS1298_RREG, 0x1A)
#define ADS1298_IOCTALLREG	_IOC(_IOC_WRITE, ADS1298_IOC_MAGIC, ADS1298_WREG, 0x1A)
